<!doctype html>
<html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <script src="http://www.chartjs.org/dist/2.7.1/Chart.js"></script>
    <script src="http://www.chartjs.org/samples/latest/utils.js"></script>
    <script src="js/modal.js"></script>
    <link rel="stylesheet" href="css/style-modal.css">
    <link rel="stylesheet" href="css/style_Dashboard.css">
    <link rel="stylesheet" href="css/style_relatorio.css">
    <link href="https://fonts.googleapis.com/css?family=Copse" rel="stylesheet">
    <script src="funcoes.js"></script>

    <title>Zini - Dashboard</title>
</head>

<body onload="graficoMemoria(), gaugeDisco(), gaugeProcessador(), gaugeMemoria()">
    <input type="checkbox" id="check" style="display: none;">
    <!-- HEADER -->
    <div class="header">
        <div class="container">
            <div class="title-header">
                <img style="height: 50px;" src="img/monitorBranco.png" alt="">
                <p>Computador: <span id="nome"></span></p>
            </div>
            <div class="search">
                <div class="notifi-box" id="box">
                    <h2>Notifications <span id="qntdNotificao"></span></h2>
                    <div class="notifi-item">
                        <img src="img/avatar1.png" alt="img" height="90px">
                        <div class="text">
                            <span class="notificacaoTitulo">Eric Viezzer</span>
                            <p id="notificacaoTexto1"></p>
                        </div>
                    </div>

                    <div class="notifi-item">
                        <img src="img/avatar2.png" alt="img" height="90px">
                        <div class="text">
                            <span class="notificacaoTitulo">Jailson Vitor</span>
                            <p id="notificacaoTexto2"></p>
                        </div>
                    </div>

                    <div class="notifi-item">
                        <img src="img/avatar3.png" alt="img" height="90px">
                        <div class="text">
                            <span class="notificacaoTitulo">Luan Collyns</span>
                            <p id="notificacaoTexto3"></p>
                        </div>
                    </div>

                    <div class="notifi-item">
                        <img src="img/avatar4.png" alt="img" height="90px">
                        <div class="text">
                            <span class="notificacaoTitulo">Gabriel Curti</span>
                            <p id="notificacaoTexto4"></p>
                        </div>
                    </div>

                    <div class="notifi-item">
                        <img src="img/avatar5.png" alt="img" height="90px">
                        <div class="text">
                            <span class="notificacaoTitulo">Guilherme Nascimento</span>
                            <p id="notificacaoTexto5"></p>
                        </div>
                    </div>

                </div>

            </div>
        </div>
        <div class="iconnot" onclick="toggleNotifi()">
            <img src="img/bell.png" alt=""> <span id="qntdNotificao2">0</span>
        </div>
    </div>
    <!-- FIM HEADER -->
    <!-- MENU FECHADO -->
    <div class="side-menu">
        <label class="option" for="check">
            <img style="height: 25px;" src="img/list.png" alt="">
        </label>
        <a href="cards_dash.html">
            <div class="option">
                <img style="height: 25px;" src="img/monitor.png" alt="">
            </div>
        </a>
        <a href="Configurações.html">
            <div class="option">
                <img style="height: 25px;" src="img/gear.png" alt="">
            </div>
        </a>
        <div class="option" onclick="modalon()">
            <img style="height: 25px;" src="img/faq.png" alt="">
        </div>

        <a href="zinih.html">
            <div class="option">
                <img style="height: 25px;" src="img/icon-ergonomia.png" alt="">
            </div>
        </a>

        <div class="option" onclick="logoff()">
            <img style="height: 25px;" src="img/logout_1.png" alt="">
        </div>
    </div>
    <!-- FIM MENU ABERTO -->
    <!-- MENU ABERTO -->
    <div class="side-menu_open">
        <nav>
            <label class="option" for="check">
                <img style="height: 25px;" src="img/list.png" alt="">
                <p>Menu</p>
            </label>
            <a class="links" href="cards_dash.html">
                <div class="option">
                    <img style="height: 25px;" src="img/monitor.png" alt="">
                    <p>Computadores</p>
                </div>
            </a>
            <a class="links" href="Configurações.html">
                <div class="option">
                    <img style="height: 25px;" src="img/gear.png" alt="">
                    <p>Opções</p>
                </div>
            </a>
            <div class="option" id="open-modal" onclick="modalon()">
                <img style="height: 25px; margin-left: 15px;" src="img/faq.png" alt="">
                <p style="margin-left: 14px;">FAQ</p>
            </div>

            <a class="links" href="zinih.html">
                <div class="option">
                    <img style="height: 25px;" src="img/icon-ergonomia.png" alt="">
                    <p>WorkHealth</p>
                </div>
            </a>

            <div class="option" onclick="logoff()">
                <img style="height: 30px; margin-left: 23px; " src="img/logout_1.png" alt="">
                <p style="margin-left: 12px;">Logout</p>
            </div>

            <div>
                <img style="height: 45px;margin-left: 28px;margin-top: 300px;" src="img/Monochrome on Transparent.png"
                    alt="">
            </div>
        </nav>
    </div>

    <div class="container-corpo">
        <div class="modal-faq" id="modal" style="display: none; position: absolute; z-index: 9;">
            <h1>FAQ</h1>
            <img src="img/img-sair.png" class="btsair" onclick="btsair()">
            <img src="img/Original on Transparent.png">
            <div class="container-modal">
                <div class="accordion" id="accordion1">
                    <div class="icon-modal"></div>
                    <h5>Problemas com envio de dados</h5>
                </div>
                <div class="panel-modal" id="panel1">
                    <p>Caso aconteça algum problema com o envio de dados ou de visualização, entre em contato com a
                        nossa equipe através do Email: projeto.zini@hotmail.com</p>
                </div>

                <div class="accordion" id="accordion2">
                    <div class="icon-modal"></div>
                    <h5> Problemas com login e cadastro</h5>
                </div>
                <div class="panel-modal" id="panel2">
                    <p>Em casos de problemas na criação de usuário ou erros no preenchimento de dados ao logar você terá
                        opções como "esqueci a senha" ou entrar em contato conosco: projeto.zini@hotmail.com</p>
                </div>

                <div class="accordion" id="accordion3">
                    <div class="icon-modal"></div>
                    <h5>Erro ao cadastrar novas máquinas</h5>
                </div>

                <div class="panel-modal" id="panel3">
                    <p> Verifique se os dados e ID correspondem ao que você está enviando para o nosso banco, caso haja
                        correção dos mesmos e erro persistir entre em contato com a nossa equipe:
                        projeto.zini@hotmail.com </p>
                </div>

                <div class="accordion" id="accordion4">
                    <div class="icon-modal"></div>
                    <h5> Falha na exibição dos dados</h5>
                </div>
                <div class="panel-modal" id="panel4">
                    <p> Se houver problemas na exibição tente reiniciar a aplicação em suas máquinas e volte ao painel
                        caso permaneça o erro entre em contato com a nossa equipe: projeto.zini@hotmail.com</p>
                </div>

                <div class="accordion" id="accordion5">
                    <div class="icon-modal"></div>
                    <h5> Dados não compatíveis </h5>
                </div>
                <div class="panel-modal" id="panel5">
                    <p> Em casos de dados que corrompam os outros dados do paínel devem ser excluidos ou alterado caso
                        não seja possivel inserir novamente ou tirar o erro entre em contato com nossa equipe:
                        projeto.zini@hotmail.com </p>
                </div>


            </div>
        </div>
        <div class="flex-box">
            <div class="graficos">
                <div class="fundografico">
                    <div class="grafico">
                        <canvas id="myChart" height="110px"></canvas>
                    </div>
                    <div class="containerCard">
                        <div class="cardtpUso">Última data de verificação:
                            <h3 id="dataStatus"></h3>
                        </div><br>
                        <div class="cardSoft">Status do Computador:
                            <h3 id="statusComputador">OFFLINE</h3>
                        </div>
                    </div>
                </div>
                <center>
                    <div style="height: 1.8px;width: 800px;background: #a3adb7;"></div>
                </center>
                <div class="fundocards">

                    <center>

                        <div class="card">

                            <div class="gauge2">
                                <div class="gauge2-body">
                                    <!-- <div class="gauge-progress2"></div> -->
                                    <div class="gauge-contain2" id="gaugeContain2">0 % </div>
                                </div>
                            </div>
                            <span class="componente">Processador</span>
                            <div class="textEstado">
                                <p>Estado: <span id="valor2">Carregando...</span></p>
                                <img src="" alt="" id="imagem2">
                            </div>
                            <br>

                            <!-- <div class="alertasEstado"><img src="" id="imgValor2" alt="" width="15%"></div> -->

                            <button onclick="graficoProcessador()"> Visualizar gráfico </button>
                        </div>

                    </center>


                    <div class="card">
                        <center>
                            <div class="gauge">

                                <div class="gauge-body">
                                    <!-- <div class="gauge-progress1"></div> -->
                                    <div class="gauge-contain1" id="gaugeContain1">0 GB</div>
                                </div>
                            </div>
                            <span class="componente">Disco Rígido</span>
                            <div class="textEstado">
                                <!-- <p>Estado: <span id="valor">Carregando...</span></p> -->
                                <!-- <img src="" alt="" id="imagem2"> -->
                            </div>
                            <!-- <div class="alertasEstado"><img src="" id="imgValor" alt="" width="15%"></div> -->

                            <!-- <button onclick="graficoDisco()"> Visualizar gráfico</button> -->
                    </div>

                    </center>
                    <div class="card">
                        <center>
                            <div class="gauge3">
                                <div class="gauge-body">
                                    <!-- <div class="gauge-progress3"></div> -->
                                    <div class="gauge-contain3" id="gaugeContain3">0 %</div>
                                </div>
                            </div>
                            <span class="componente">Memória</span>
                            <div class="textEstado">
                                <p>Estado: <span id="valor3">Carregando...</span></p>
                                <img src="" alt="" id="imagem3">
                            </div>
                            <!-- <div class="alertasEstado"><img src="" id="imgValor3" alt="" width="15%"></div> -->
                            <button onclick="graficoMemoria()"> Visualizar gráfico</button>
                    </div>
                    </center>


                </div>
            </div>
        </div>

        <!-- INICIO PARTE RELATORIO -->
        <div class="title-headerReport">
            <p><span id="nome2"></span>, faça o download dos seus relatórios!</p>
        </div>
        <div class="showcase">


            <div class="buttonsRelatorio">
                <!-- <select name="" id="maquinas">
                    <option value="">Selecione uma máquina</option>
                    <option value="maquina1">Máquina 1</option>
                    <option value="maquina2">Máquina 2</option>
                    <option value="maquina3">Máquina 3</option>
                    <option value="maquina4">Máquina 4</option>
                </select> -->
                <!-- <button class="buttonNewReport">Gerar Relatório</button> -->
            </div>
            <div class="graficReport">
                <h3>Média de uso dos últimos 5 dias</h3>
                <br>
                <canvas id="myChartReport" height="110px"></canvas>
            </div>
            <div class="title-headerReport">
                <p>Máquina: <span id="nome3"></span></p>
            </div>
            <div class="informationsDesktop">

                <div class="informationDate">
                    <div class="informations">
                        <h3>Dia 09</h3>
                        <h4>Memória:<br> Baixo</h4>
                        <h4>Processador:<br> Baixo</h4>
                        <h5>Tempo de <br>Atividade: 05h</h5>
                    </div>
                    <div class="informations">
                        <h3>Dia 10</h3>
                        <h4>Memória:<br> Baixo</h4>
                        <h4>Processador:<br> Baixo</h4>
                        <h5>Tempo de <br>atividade: 03h</h5>
                    </div>
                    <div class="informations">
                        <h3>Dia 11</h3>
                        <h4>Memória:<br> Baixo</h4>
                        <h4>Processador:<br> Baixo</h4>
                        <h5>Tempo de <br>atividade: 01h</h5>
                    </div>
                    <div class="informations">
                        <h3>Dia 12</h3>
                        <h4>Memória:<br> Baixo</h4>
                        <h4>Processador:<br> Baixo</h4>
                        <h5>Tempo de <br>atividade: 01h</h5>
                    </div>
                    <div class="informations">
                        <h3>Dia 13</h3>
                        <h4>Memória:<br> Baixo</h4>
                        <h4>Processador:<br> Baixo</h4>
                        <h5>Tempo de <br>atividade: 05h</h5>
                    </div>
                </div>

            </div>
        </div>



    </div>
    </div>


    <script>



        nome.innerHTML = sessionStorage.nomeComputador
        nome2.innerHTML = nome.innerHTML;
        nome3.innerHTML = nome.innerHTML;
        var valorTotalMemoria = 0;
        var valorTotalProcessador = 0;
        var valorTotalDisco = 0;
        var contadorLeitura = 1;
        var contadorQuantidadeMemoria = 0;
        var contadorQuantidadeProcessador = 0;
        var mediaProcessador = "";
        var mediaMemoria = "";
        var valorStatus = 0;
        var valorRecebido = 0;
        var contadorStatus = 0;
        var resultadosProcessadorReport = [];
        var resultadosMemoriaReport = [];
        var contConteudo = 1;
        var contNotificacao = 0;
        var result;
        var result2;
        var result3;

        var teste;

        document.querySelector(".notificacaoTitulo").textContent = nome.innerHTML

        var resultados = [];
        var dados3 = {
            type: 'line',
            data: {
                labels: ['1', '2', '3', '4', '5'],
                datasets: [{
                    label: 'Disco Rígido',
                    data: [resultados[0], resultados[1], resultados[2], resultados[3], resultados[4]],
                    backgroundColor: [
                        'rgba(252,197,119, 1)',
                        'rgba(252,197,119, 1)',
                        'rgba(252,197,119, 1)',
                        'rgba(252,197,119, 1)',
                        'rgba(252,197,119, 1)',
                        'rgba(252,197,119, 1)'
                    ],
                    borderColor: [
                        'rgba(252,197,119, 0.5)',
                        'rgba(252,197,119, 0.5)',
                        'rgba(252,197,119, 0.5)',
                        'rgba(252,197,119, 0.5)',
                        'rgba(252,197,119, 0.5)',
                        'rgba(252,197,119, 0.5)'
                    ],
                    borderWidth: 1

                }
                ]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            fontSize: 12
                        }
                    }],
                    xAxes: [{
                        ticks: {
                            fontSize: 14
                        }
                    }]
                }
            }
        };


        Chart.defaults.global.defaultFontColor = 'white';
        var ctx = document.getElementById('myChart').getContext('2d');
        window.grafico_linha = new Chart(ctx, dados3)
        // var ctx = document.getElementById("myChart").getContext("2d");
        // ctx.canvas.width = 2000;
        // ctx.canvas.height = 900;


        setInterval(() => {

            var status = false


            // aguardar();

            fetch(`/leituras/buscarUso/${sessionStorage.idComputador_meuapp}`).then(resposta => {

                if (resposta.ok) {
                    resposta.json().then(function (resposta) {

                        // console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);

                        // aqui, após registro. use os nomes 
                        // dos atributos que vem no JSON 
                        var dados = {
                            idComputador: resposta.fkComputador,
                            idComponente: resposta.fkComponentes,
                            usoPorcentagem: resposta.usoPorcentagemAtual,
                            dataLeitura: resposta.dataLeitura
                        }

                        for (i = 0; i < resposta.length; i++) {

                            info = resposta[i]
                            teste = resposta[1];
                            console.log(teste.usoPorcentagemAtual)


                            dataStatus.innerHTML = `${info.dataLeitura}`;




                            // ESTAVA VENDO AQUI




                            if (parseFloat(info.usoPorcentagemAtual) > 100) {

                                gaugeContain1.innerHTML = info.usoPorcentagemAtual + " GB";

                            } else {

                                if (i == 1) {
                                    // id1.innerHTML = info.idComputador;
                                    // tipoSistema1.innerHTML = info.tipoSistemaOperacional;
                                    // nome1.innerHTML = info.nomeUsuario;
                                    gaugeContain3.innerHTML = info.usoPorcentagemAtual + " %";

                                } else if (i == 2) {
                                    // id2.innerHTML = info.idComputador;
                                    // tipoSistema2.innerHTML = info.tipoSistemaOperacional;
                                    gaugeContain2.innerHTML = info.usoPorcentagemAtual + " %";

                                } else {
                                    // id6.innerHTML = info.idComputador;
                                    // tipoSistema6.innerHTML = info.tipoSistemaOperacional;

                                    gaugeContain1.innerHTML = info.usoPorcentagemAtual + " GB";

                                }

                            }




                            // alert(info.tipoSistemaOperacional)
                            // alert(info.idComputador)
                            // alert(info.nomeUsuario)
                        }

                        if (contadorStatus < 2) {


                            valorRecebido = teste.usoPorcentagemAtual;

                            // valorStatus = valorRecebido;
                            // valorRecebido = info.usoPorcentagemAtual;
                            contadorStatus++;
                            // alert(valorStatus)
                            // alert("1")
                            // statusComputador.innerHTML = "ONLINE"



                        } else {

                            // alert(valorRecebido)
                            // alert(valorStatus)

                            // console.log(valorStatus)
                            // console.log(info.usoPorcentagemAtual)
                            // console.log(valorRecebido)

                            if (valorRecebido != teste.usoPorcentagemAtual) {
                                // alert(valorStatus)

                                statusComputador.innerHTML = "ONLINE"
                                valorRecebido = teste.usoPorcentagemAtual;


                            } else {

                                statusComputador.innerHTML = "OFFLINE"

                            }


                        }



                        // alertar(resposta.temp_atual, fkSensor);
                        // atualizarTela(dados, fkSensor);
                    });
                }
                else {

                    console.error('Nenhum dado encontrado ou erro na API');
                }
            });






            return false;

        }, 3800);



        setTimeout(() => {
            fetch(`/leituras/buscarUsoSemanal/${sessionStorage.idComputador_meuapp}`).then(resposta => {

                if (resposta.ok) {
                    resposta.json().then(function (resposta) {

                        console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);

                        // aqui, após registro. use os nomes 
                        // dos atributos que vem no JSON 
                        var dadosLeitura = {
                            // idComputador: resposta.fkComputador,
                            dataLeitura: resposta.dataLeitura,
                            usoPorcentagemAtual: resposta.usoPorcentagemAtual
                        }

                        // var dados = [resposta.usoPorcentagemAtual]
                        // console.log(resposta.usoPorcentagemAtual)
                        // alert(resposta2.usoPorcentagemAtual[0])



                        for (i = 0; i < resposta.length; i++) {

                            var info = resposta[i];


                            if (parseFloat(info.usoPorcentagemAtual) > 100) {

                                valorTotalDisco = parseFloat(info.usoPorcentagemAtual);
                            } else {


                                // hasData2 = info.dataLeitura.indexOf("04/06/2021")
                                data = new Date();
                                var date_1 = `${data.getDate() - 1}/0${data.getMonth() + 1 }/${data.getFullYear()}`
                                D_1 = info.dataLeitura.indexOf(`${date_1}`)
                                var date_2 = `${data.getDate() - 2}/0${data.getMonth() + 1 }/${data.getFullYear()}`
                                D_2 = info.dataLeitura.indexOf(`${date_2}`)
                                var date_3 = `${data.getDate() - 3}/0${data.getMonth() + 1 }/${data.getFullYear()}`
                                D_3 = info.dataLeitura.indexOf(`${date_3}`)
                                var date_4 = `${data.getDate() - 4}/0${data.getMonth() + 1 }/${data.getFullYear()}`
                                D_4 = info.dataLeitura.indexOf(`${date_4}`)
                                var date_5 = `0${data.getDate() - 5}/0${data.getMonth() + 1 }/${data.getFullYear()}`
                                D_5 = info.dataLeitura.indexOf(`${date_5}`)
                                console.log(date_5)
                                

                                if (D_1 >= 0) {


                                    if (contadorLeitura == 1) {
                                        valorTotalMemoria += parseFloat(info.usoPorcentagemAtual);
                                        mediaMemoria = (valorTotalProcessador / contadorQuantidadeProcessador).toFixed(2).toString().replace(",", ".")

                                        resultadosMemoriaReport[4] = `${mediaMemoria}`;

                                        contadorLeitura++;
                                        contadorQuantidadeMemoria++;

                                    } else if (contadorLeitura == 2) {
                                        valorTotalProcessador += parseFloat(info.usoPorcentagemAtual);
                                        mediaProcessador = (valorTotalProcessador / contadorQuantidadeProcessador).toFixed(2).toString().replace(",", ".")
                                        resultadosProcessadorReport[4] = `${mediaProcessador}`;

                                        contadorLeitura++;
                                        contadorQuantidadeProcessador++;
                                        // alert(`Processador: ${valorTotalProcessador}`)
                                    } else {
                                        valorTotalDisco = parseFloat(info.usoPorcentagemAtual);
                                        contadorLeitura = 1;
                                        // alert(`Disco: ${valorTotalDisco}`)
                                    }





                                } else if (D_2 >= 0) {
                                    if (contadorLeitura == 1) {
                                        valorTotalMemoria += parseFloat(info.usoPorcentagemAtual);
                                        mediaMemoria = (valorTotalProcessador / contadorQuantidadeProcessador).toFixed(2).toString().replace(",", ".")

                                        resultadosMemoriaReport[3] = `${mediaMemoria}`;

                                        contadorLeitura++;
                                        contadorQuantidadeMemoria++;

                                    } else if (contadorLeitura == 2) {
                                        valorTotalProcessador += parseFloat(info.usoPorcentagemAtual);
                                        mediaProcessador = (valorTotalProcessador / contadorQuantidadeProcessador).toFixed(2).toString().replace(",", ".")
                                        resultadosProcessadorReport[3] = `${mediaProcessador}`;

                                        contadorLeitura++;
                                        contadorQuantidadeProcessador++;
                                        // alert(`Processador: ${valorTotalProcessador}`)
                                    } else {
                                        valorTotalDisco = parseFloat(info.usoPorcentagemAtual);
                                        contadorLeitura = 1;
                                        // alert(`Disco: ${valorTotalDisco}`)
                                    }



                                } else if (D_3 >= 0) {
                                    if (contadorLeitura == 1) {
                                        valorTotalMemoria += parseFloat(info.usoPorcentagemAtual);
                                        mediaMemoria = (valorTotalProcessador / contadorQuantidadeProcessador).toFixed(2).toString().replace(",", ".")

                                        resultadosMemoriaReport[2] = `${mediaMemoria}`;

                                        contadorLeitura++;
                                        contadorQuantidadeMemoria++;

                                    } else if (contadorLeitura == 2) {
                                        valorTotalProcessador += parseFloat(info.usoPorcentagemAtual);
                                        mediaProcessador = (valorTotalProcessador / contadorQuantidadeProcessador).toFixed(2).toString().replace(",", ".")
                                        resultadosProcessadorReport[2] = `${mediaProcessador}`;

                                        contadorLeitura++;
                                        contadorQuantidadeProcessador++;
                                        // alert(`Processador: ${valorTotalProcessador}`)
                                    } else {
                                        valorTotalDisco = parseFloat(info.usoPorcentagemAtual);
                                        contadorLeitura = 1;
                                        // alert(`Disco: ${valorTotalDisco}`)
                                    }



                                } else if (D_4 >= 0) {
                                    if (contadorLeitura == 1) {
                                        valorTotalMemoria += parseFloat(info.usoPorcentagemAtual);
                                        mediaMemoria = (valorTotalProcessador / contadorQuantidadeProcessador).toFixed(2).toString().replace(",", ".")

                                        resultadosMemoriaReport[1] = `${mediaMemoria}`;

                                        contadorLeitura++;
                                        contadorQuantidadeMemoria++;

                                    } else if (contadorLeitura == 2) {
                                        valorTotalProcessador += parseFloat(info.usoPorcentagemAtual);
                                        mediaProcessador = (valorTotalProcessador / contadorQuantidadeProcessador).toFixed(2).toString().replace(",", ".")
                                        resultadosProcessadorReport[1] = `${mediaProcessador}`;

                                        contadorLeitura++;
                                        contadorQuantidadeProcessador++;
                                        // alert(`Processador: ${valorTotalProcessador}`)
                                    } else {
                                        valorTotalDisco = parseFloat(info.usoPorcentagemAtual);
                                        contadorLeitura = 1;
                                        // alert(`Disco: ${valorTotalDisco}`)
                                    }



                                } else if (D_5 >= 0) {
                                    if (contadorLeitura == 1) {
                                        valorTotalMemoria += parseFloat(info.usoPorcentagemAtual);
                                        mediaMemoria = (valorTotalProcessador / contadorQuantidadeProcessador).toFixed(2).toString().replace(",", ".")

                                        resultadosMemoriaReport[0] = `${mediaMemoria}`;

                                        contadorLeitura++;
                                        contadorQuantidadeMemoria++;

                                    } else if (contadorLeitura == 2) {
                                        valorTotalProcessador += parseFloat(info.usoPorcentagemAtual);
                                        mediaProcessador = (valorTotalProcessador / contadorQuantidadeProcessador).toFixed(2).toString().replace(",", ".")
                                        resultadosProcessadorReport[0] = `${mediaProcessador}`;

                                        contadorLeitura++;
                                        contadorQuantidadeProcessador++;
                                        // alert(`Processador: ${valorTotalProcessador}`)
                                    } else {
                                        valorTotalDisco = parseFloat(info.usoPorcentagemAtual);
                                        contadorLeitura = 1;
                                        // alert(`Disco: ${valorTotalDisco}`)
                                    }



                                }



                            }






                            // console.log(info.usoPorcentagemAtual)

                            // if (i == 1) {
                            //     // id1.innerHTML = info.idComputador;
                            //     // tipoSistema1.innerHTML = info.tipoSistemaOperacional;
                            //     // nome1.innerHTML = info.nomeUsuario;
                            //     gaugeContain3.innerHTML = info.usoPorcentagemAtual + " %";

                            // } else if (i == 2) {
                            //     // id2.innerHTML = info.idComputador;
                            //     // tipoSistema2.innerHTML = info.tipoSistemaOperacional;
                            //     gaugeContain2.innerHTML = info.usoPorcentagemAtual + " %";

                            // } else {
                            //     // id6.innerHTML = info.idComputador;
                            //     // tipoSistema6.innerHTML = info.tipoSistemaOperacional;

                            //     gaugeContain1.innerHTML = info.usoPorcentagemAtual + " GB";

                            // }


                            // alert(info.tipoSistemaOperacional)
                            // alert(info.idComputador)
                            // alert(info.nomeUsuario)
                        }


                        // alert(valorTotalMemoria)
                        // alert(valorTotalMemoria / contadorQuantidadeMemoria)

                        // alertar(resposta.temp_atual, fkSensor);
                        // atualizarTela(dados, fkSensor);
                    });
                }
                else {

                    console.error('Nenhum dado encontrado ou erro na API');
                }
            });

        }, 1000);





        contador = 10;


        // Gauge1

        const gaugeElement = document.querySelector(".gauge");

        function setGaugeValue(gauge, value) {

            if (value < 0 || value > 1) {
                return;
            }

            // gauge.querySelector(".gauge-progress1").style.transform = `rotate(${value / 2}turn)`;
            // gauge.querySelector(".gauge-contain1").textContent = `${Math.round(value * 100)}%`;
            // discoValue.innerHTML = `${Math.round(value * 100)}%`;
            result = parseInt(gaugeContain1.innerHTML);


        }

        // function gaugeteste() {

        //     clearInterval(intervaloProcessador)
        //     dados3.data.datasets[0].data.shift()
        //     dados3.data.datasets[0].data.shift()
        //     dados3.data.datasets[0].data.shift()
        //     dados3.data.datasets[0].data.shift()
        //     setInterval(() => {

        //         resultados.shift();
        //         resultados.push(Math.trunc(result3));
        //         dados3.data.datasets[0].data.push(result3)
        //         dados3.data.datasets[0].data.shift()
        //         window.grafico_linha.update();

        //     }, 1000);
        // }


        function gaugeDisco() {

            var gaugeTimer1 = setInterval(() => {

                setGaugeValue(gaugeElement, result);
                if (result >= 75 && result < 90) {






                } else if (result >= 90) {



                } else {

                    gaugeContain1.style.color = "#009578";



                }
                // console.log(Math.trunc(result))

                qntdNotificao.innerHTML = contNotificacao;
                qntdNotificao2.innerHTML = contNotificacao;

            }, 3000);

            function trocarCor(cor) {
                let elements = document.getElementsByClassName('gauge-progress1');
                for (var i = 0; i < elements.length; i++) {
                    elements[i].style.backgroundColor = `${cor}`;
                }
            }
        }




        // Fim gauge1

        // gauge2



        const gaugeElement2 = document.querySelector(".gauge2");

        function setGaugeValue2(gauge2, value2) {

            if (value2 < 0 || value2 > 1) {
                return;
            }

            // gauge2.querySelector(".gauge-progress2").style.transform = `rotate(${value2 / 2}turn)`;
            // gauge2.querySelector(".gauge-contain2").textContent = `${Math.round(value2 * 100)}%`;
            // discoValue2.innerHTML = `${Math.round(value2 * 100)}%`;
            result2 = parseInt(gaugeContain2.innerHTML);
        }


        function gaugeProcessador() {
            var gaugeTimer2 = setInterval(() => {

                setGaugeValue2(gaugeElement2, result2);
                if (result2 >= 75 && result2 < 90) {
                    // discoValue2.style.color = "yellow";
                    valor2.innerHTML = "Moderado";
                    valor2.style.color = "yellow";
                    imagem2.src = "img/alert_risco2.gif";
                    imagem2.style.width = "53%";
                    gaugeContain2.style.color = "yellow";
                    contNotificacao++;
                    trocarCor2("yellow");
                    if (contConteudo == 1) {
                        notificacaoTexto1.innerHTML = `Processador: Situação <span style='color: yellow'>MODERADA!!</span> <br><br> Porcentagem: <span style='color: yellow'>${result2}%</span>`
                        contConteudo++;
                    } else if (contConteudo == 2) {
                        notificacaoTexto2.innerHTML = `Processador: Situação <span style='color: yellow'>MODERADA!!</span> <br><br> Porcentagem: <span style='color: yellow'>${result2}%</span>`
                        contConteudo++;
                    } else if (contConteudo == 3) {
                        notificacaoTexto3.innerHTML = `Processador: Situação <span style='color: yellow'>MODERADA!!</span> <br><br> Porcentagem: <span style='color: yellow'>${result2}%</span>`
                        contConteudo++;
                    } else if (contConteudo == 4) {
                        notificacaoTexto4.innerHTML = `Processador: Situação <span style='color: yellow'>MODERADA!!</span> <br><br> Porcentagem: <span style='color: yellow'>${result2}%</span>`
                        contConteudo++;
                    } else {
                        notificacaoTexto5.innerHTML = `Processador: Situação <span style='color: yellow'>MODERADA!!</span> <br><br> Porcentagem: <span style='color: yellow'>${result2}%</span>`
                        contConteudo = 1;
                    }



                } else if (result2 >= 90) {
                    // discoValue2.style.color = "red";
                    valor2.innerHTML = "Crítico";
                    valor2.style.color = "red";
                    imagem2.src = "img/alert_max.gif";
                    imagem2.style.width = "53%";
                    gaugeContain2.style.color = "red";
                    contNotificacao++;
                    trocarCor2("red");

                    if (contConteudo == 1) {
                        notificacaoTexto1.innerHTML = `Processador: Situação <span style='color: red'>CRÍTICA!!</span> <br><br> Porcentagem: <span style='color: red'>${result2}%</span>`
                        contConteudo++;
                    } else if (contConteudo == 2) {
                        notificacaoTexto2.innerHTML = `Processador: Situação <span style='color: red'>CRÍTICA!!</span> <br><br> Porcentagem: <span style='color: red'>${result2}%</span>`
                        contConteudo++;
                    } else if (contConteudo == 3) {
                        notificacaoTexto3.innerHTML = `Processador: Situação <span style='color: red'>CRÍTICA!!</span> <br><br> Porcentagem: <span style='color: red'>${result2}%</span>`
                        contConteudo++;
                    } else if (contConteudo == 4) {
                        notificacaoTexto4.innerHTML = `Processador: Situação <span style='color: red'>CRÍTICA!!</span> <br><br> Porcentagem: <span style='color: red'>${result2}%</span>`
                        contConteudo++;
                    } else {
                        notificacaoTexto5.innerHTML = `Processador: Situação <span style='color: red'>CRÍTICA!!</span> <br><br> Porcentagem: <span style='color: red'>${result2}%</span>`
                        contConteudo = 1;
                    }

                } else {
                    // discoValue2.style.color = "#009578";
                    valor2.innerHTML = "Normal";
                    valor2.style.color = "#009578";
                    imagem2.src = "img/ok.png";
                    imagem2.style.width = "30%";
                    gaugeContain2.style.color = "#009578";
                    trocarCor2("#009578");



                }

                // if (contador != 0) {

                //     var time3 = setInterval(() => {
                //         resultados.shift();
                //         resultados.push(Math.trunc(result));
                //         dados3.data.datasets[0].data.push(result)
                //         dados3.data.datasets[0].data.shift()

                //         window.grafico_linha.update();
                //         clearInterval(time3)
                //     }, 0);

                // } else {
                //     var time4 = setInterval(() => {
                //         resultados.shift();
                //         resultados.push(Math.trunc(result));
                //         dados3.data.datasets[0].data.push(result)
                //         dados3.data.datasets[0].data.shift()

                //         window.grafico_linha.update();
                //     }, tempo);
                // }

                qntdNotificao.innerHTML = contNotificacao;
                qntdNotificao2.innerHTML = contNotificacao;

            }, 1300);


            function trocarCor2(cor2) {
                let elements2 = document.getElementsByClassName('gauge-progress2');
                for (var i2 = 0; i2 < elements2.length; i2++) {
                    elements2[i2].style.backgroundColor = `${cor2}`;
                }
            }
        }
        // Fim gauge2

        // gauge3
        const gaugeElement3 = document.querySelector(".gauge3");

        function setGaugeValue3(gauge3, value3) {

            if (value3 < 0 || value3 > 1) {
                return;
            }

            // gauge3.querySelector(".gauge-progress3").style.transform = `rotate(${value3 / 2}turn)`;
            // gauge3.querySelector(".gauge-contain3").textContent = parseInt(gaugeContain3.innerHTML);
            // discoValue3.innerHTML = `${Math.round(value3 * 100)}%`;
            result3 = parseInt(gaugeContain3.innerHTML);
        }




        function gaugeMemoria() {
            var gaugeTimer3 = setInterval(() => {

                setGaugeValue3(gaugeElement3, result3);
                if (result3 >= 75 && result3 < 90) {
                    // discoValue3.style.color = "yellow";
                    valor3.innerHTML = "Moderado";
                    valor3.style.color = "yellow";
                    imagem3.src = "img/alert_risco2.gif";
                    imagem3.style.width = "53%";
                    gaugeContain3.style.color = "yellow";
                    contNotificacao++;
                    trocarCor3("yellow");
                    if (contConteudo == 1) {
                        notificacaoTexto1.innerHTML = `Memória: Situação <span style='color: yellow'>MODERADA!!</span> <br><br> Porcentagem: <span style='color: yellow'>${result3}%</span>`
                        contConteudo++;
                    } else if (contConteudo == 2) {
                        notificacaoTexto2.innerHTML = `Memória: Situação <span style='color: yellow'>MODERADA!!</span> <br><br> Porcentagem: <span style='color: yellow'>${result3}%</span>`
                        contConteudo++;
                    } else if (contConteudo == 3) {
                        notificacaoTexto3.innerHTML = `Memória: Situação <span style='color: yellow'>MODERADA!!</span> <br><br> Porcentagem: <span style='color: yellow'>${result3}%</span>`
                        contConteudo++;
                    } else if (contConteudo == 4) {
                        notificacaoTexto4.innerHTML = `Memória: Situação <span style='color: yellow'>MODERADA!!</span> <br><br> Porcentagem: <span style='color: yellow'>${result3}%</span>`
                        contConteudo++;
                    } else {
                        notificacaoTexto5.innerHTML = `Memória: Situação <span style='color: yellow'>MODERADA!!</span> <br><br> Porcentagem: <span style='color: yellow'>${result3}%</span>`
                        contConteudo = 1;
                    }



                } else if (result3 >= 90) {
                    // discoValue3.style.color = "red";
                    valor3.innerHTML = "Crítico";
                    valor3.style.color = "red";
                    imagem3.src = "img/alert_max.gif";
                    imagem3.style.width = "53%";
                    gaugeContain3.style.color = "red";
                    contNotificacao++;
                    trocarCor3("red");
                    if (contConteudo == 1) {
                        notificacaoTexto1.innerHTML = `Memória: Situação <span style='color: red'>CRÍTICA!!</span> <br><br> Porcentagem: <span style='color: red'>${result3}%</span>`
                        contConteudo++;
                    } else if (contConteudo == 2) {
                        notificacaoTexto2.innerHTML = `Memória: Situação <span style='color: red'>CRÍTICA!!</span> <br><br> Porcentagem: <span style='color: red'>${result3}%</span>`
                        contConteudo++;
                    } else if (contConteudo == 3) {
                        notificacaoTexto3.innerHTML = `Memória: Situação <span style='color: red'>CRÍTICA!!</span> <br><br> Porcentagem: <span style='color: red'>${result3}%</span>`
                        contConteudo++;
                    } else if (contConteudo == 4) {
                        notificacaoTexto4.innerHTML = `Memória: Situação <span style='color: red'>CRÍTICA!!</span> <br><br> Porcentagem: <span style='color: red'>${result3}%</span>`
                        contConteudo++;
                    } else {
                        notificacaoTexto5.innerHTML = `Memória: Situação <span style='color: red'>CRÍTICA!!</span> <br><br> Porcentagem: <span style='color: red'>${result3}%</span>`
                        contConteudo = 1;
                    }


                } else {
                    // discoValue3.style.color = "#009578";
                    valor3.innerHTML = "Normal";
                    valor3.style.color = "#009578";
                    imagem3.src = "img/ok.png";
                    imagem3.style.width = "30%";
                    gaugeContain3.style.color = "#009578";
                    trocarCor3("#009578");


                }

                qntdNotificao.innerHTML = contNotificacao;
                qntdNotificao2.innerHTML = contNotificacao;
            }, 3000);

            function trocarCor3(cor3) {
                let elements3 = document.getElementsByClassName('gauge-progress3');
                for (var i3 = 0; i3 < elements3.length; i3++) {
                    elements3[i3].style.backgroundColor = `${cor3}`;
                }
            }
        }


        function graficoMemoria() {

            window.grafico_linha.update();
            resultados.shift();
            resultados.push(Math.trunc(result2));
            dados3.data.datasets[0].data.push(result2)
            dados3.data.datasets[0].data.shift()
        }

        // Fim gauge3
        cont = 1;


        // function graficoDisco() {
        //     if (cont != 1) {
        //         cont = 1;
        //     }
        //     if (cont == 1) {
        //         requestAnimationFrame(() => {



        //             var time1 = setInterval(() => {
        //                 if (cont == 1) {

        //                     dados3.data.datasets[0].label = ("Disco Rígido")
        //                     resultados.shift();
        //                     resultados.push(Math.trunc(result));
        //                     dados3.data.datasets[0].data.push(result)
        //                     dados3.data.datasets[0].data.shift()
        //                     window.grafico_linha.update();
        //                     gaugeTimer1.resume()
        //                 } else {
        //                     clearInterval(time1)
        //                 }
        //             }, 3000);

        //         }, 10);
        //     }

        // }

        function graficoProcessador() {

            window.grafico_linha.update();
            if (cont != 2) {
                cont = 2;
            }
            if (cont == 2) {
                requestAnimationFrame(() => {

                    var time2 = setInterval(() => {
                        if (cont == 2) {
                            dados3.data.datasets[0].label = ("Processador")

                            resultados.shift();
                            resultados.push(Math.trunc(result2));
                            dados3.data.datasets[0].data.push(result2)
                            dados3.data.datasets[0].data.shift()
                            window.grafico_linha.update();
                            gaugeTimer2.resume()
                        } else {
                            clearInterval(time2)
                        }

                    }, 1300);

                }, 10);
            }


        }

        function graficoMemoria() {
            window.grafico_linha.update();

            if (cont != 3) {
                cont = 3;
            }
            if (cont == 3) {
                requestAnimationFrame(() => {

                    var time3 = setInterval(() => {

                        if (cont == 3) {
                            dados3.data.datasets[0].label = ("Memória")

                            resultados.shift();
                            resultados.push(Math.trunc(result3));
                            dados3.data.datasets[0].data.push(result3)
                            dados3.data.datasets[0].data.shift()
                            window.grafico_linha.update();
                            // gaugeTimer1.resume()
                        } else {
                            clearInterval(time3)

                        }

                    }, 3000);

                }, 10);
            }


        }


        // do {


        // } while (cont == 1);
        // do {

        //     resultados.shift();
        //             resultados.push(Math.trunc(result2));
        //             dados3.data.datasets[0].data.push(result2)
        //             dados3.data.datasets[0].data.shift()

        //             window.grafico_linha.update();
        // } while (cont == 2);

        var down = false;
        function toggleNotifi() {
            var box = document.getElementById('box');
            if (down) {
                box.style.height = '0px';
                box.style.opacity = 0;
                box.style.visibility = "hidden";
                down = false;
                contNotificacao = 0;
            } else {
                box.style.height = 'auto';
                box.style.opacity = 1;
                box.style.visibility = "visible";
                down = true;

            }
        }

        // <![CDATA[
        var ttChatLoaderS = document.createElement('script');
        document.tomticketChatLoaderScriptVersion = 2;
        ttChatLoaderS.src = 'https://zini.tomticket.com/scripts-chat/chat.min.js'
            + '?id=EP52507'
            + '&account=3360448P03042021042116'
            + '&autoOpen=0'
            + '&hideWhenOffline=0'
            + '&d=zini'
            + '&ts=' + new Date().getTime()
            + '&ref=' + encodeURIComponent(document.URL);
        document.body.appendChild(ttChatLoaderS);
        //]]>

        // INICIO BACK END RELATORIO

        // console.log(total.toString().replace(".", ","));





        setTimeout(() => {


            // resultadosProcessadorReport = [mediaProcessador];
            // resultadosMemoriaReport = [mediaMemoria];
            var dadosReport = {
                type: 'bar',
                data: {
                    labels: ['09/06', '10/06', '11/06', '12/06', '13/06'],
                    datasets: [{
                        label: ['Processador'],
                        data: [resultadosProcessadorReport[0], resultadosProcessadorReport[1], resultadosProcessadorReport[2], resultadosProcessadorReport[3], resultadosProcessadorReport[4]],
                        backgroundColor: [
                            'rgba(252,197,119, 1)',
                            'rgba(252,197,119, 1)',
                            'rgba(252,197,119, 1)',
                            'rgba(252,197,119, 1)',
                            'rgba(252,197,119, 1)',
                            'rgba(252,197,119, 1)'
                        ],
                        borderColor: [
                            'rgba(252,197,119, 0.5)',
                            'rgba(252,197,119, 0.5)',
                            'rgba(252,197,119, 0.5)',
                            'rgba(252,197,119, 0.5)',
                            'rgba(252,197,119, 0.5)',
                            'rgba(252,197,119, 0.5)'
                        ],
                        borderWidth: 1

                    },
                    {
                        label: ['Memória'],
                        data: [resultadosMemoriaReport[0], resultadosMemoriaReport[1], resultadosMemoriaReport[2], resultadosMemoriaReport[3], resultadosMemoriaReport[4]],
                        backgroundColor: [
                            'rgba(252,197,119, 1)',
                            'rgba(252,197,119, 1)',
                            'rgba(252,197,119, 1)',
                            'rgba(252,197,119, 1)',
                            'rgba(252,197,119, 1)',
                            'rgba(252,197,119, 1)'
                        ],
                        borderColor: [
                            'rgba(252,197,119, 0.5)',
                            'rgba(252,197,119, 0.5)',
                            'rgba(252,197,119, 0.5)',
                            'rgba(252,197,119, 0.5)',
                            'rgba(252,197,119, 0.5)',
                            'rgba(252,197,119, 0.5)'
                        ],
                        borderWidth: 1

                    }
                    ]
                },
                options: {
                    scales: {
                        yAxes: [{
                            ticks: {
                                fontSize: 15
                            }
                        }],
                        xAxes: [{
                            ticks: {
                                fontSize: 20
                            }
                        }]
                    }
                }
            };




            var ctxReport = document.getElementById('myChartReport').getContext('2d');
            window.grafico_linha2 = new Chart(ctxReport, dadosReport)




        }, 4000);


        Chart.defaults.global.defaultFontSize = 20;
        Chart.defaults.global.defaultFontColor = 'white';



        const selected = document.querySelector(".selected");
        const optionsContainer = document.querySelector(".options-container");

        const optionsList = document.querySelectorAll(".option");

        selected.addEventListener("click", () => {
            optionsContainer.classList.toggle("active");
        });

        optionsList.forEach(o => {
            o.addEventListener("click", () => {
                selected.innerHTML = o.querySelector("label").innerHTML;
                optionsContainer.classList.remove("active");
            });
        });
        // <!-- FIM -->









    </script>

    <!-- <script type="text/javascript">

    </script> -->





</body>

</html>